<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>WCWD — World Chain / WLD Dashboard</title>
  <meta name="description" content="World Chain quick dashboard: gas, TPS, WLD price, and latest-block activity sample (Phase 0)." />

  <link rel="stylesheet" href="./style.css" />
</head>

<body>
  <main class="wrap">
    <header class="hero">
      <h1>WCWD — World Chain / WLD Dashboard</h1>
      <p class="lead">Phase 0: RPC + optional APIs (Etherscan / CoinGecko). No indexer. No wallet connect.</p>

      <div class="actions">
        <button id="reload" type="button">Reload</button>
        <div class="status">Status: <strong id="status">—</strong></div>
      </div>

      <p class="muted">
        This dashboard provides “best-effort” signals. Some metrics are unavailable without an indexer.
      </p>
    </header>

    <section class="card">
      <h2>Network</h2>
      <div class="grid">
        <div class="metric">
          <div class="k">TPS (est.)</div>
          <div class="v" id="tps">—</div>
        </div>

        <div class="metric">
          <div class="k">Tx/day (est.)</div>
          <div class="v" id="tx24h">—</div>
        </div>

        <div class="metric">
          <div class="k">Gas Price</div>
          <div class="v" id="gasPrice">—</div>
        </div>

        <div class="metric">
          <div class="k">New addresses (24h)</div>
          <div class="v" id="newAddr24h">—</div>
          <div class="n" id="newAddrNote"></div>
        </div>

        <div class="metric">
          <div class="k">Total addresses</div>
          <div class="v" id="totalAddr">—</div>
          <div class="n" id="totalAddrNote"></div>
        </div>
      </div>
    </section>

    <section class="card">
      <h2>WLD Market (CoinGecko)</h2>
      <div class="grid">
        <div class="metric">
          <div class="k">WLD (USD)</div>
          <div class="v" id="wldUsd">—</div>
        </div>

        <div class="metric">
          <div class="k">WLD (JPY)</div>
          <div class="v" id="wldJpy">—</div>
        </div>

        <div class="metric">
          <div class="k">24h change</div>
          <div class="v" id="wldChg24h">—</div>
        </div>

        <div class="metric">
          <div class="k">Market cap</div>
          <div class="v" id="wldMc">—</div>
        </div>

        <div class="metric">
          <div class="k">24h volume</div>
          <div class="v" id="wldVol">—</div>
        </div>

        <div class="metric">
          <div class="k">Sparkline (7d)</div>
          <div class="v mono" id="wldSpark7d">—</div>
        </div>
      </div>

      <div class="note" id="cgNote"></div>

      <div class="mini">
        <div class="k">WLD 7d (sparkline)</div>
        <div class="v mono" id="chartWld7d">—</div>
      </div>
    </section>

    <section class="card">
      <h2>Activity (latest block sample)</h2>
      <p class="muted">Approximation based on latest block logs. Not a full-chain breakdown.</p>

      <div class="grid">
        <div class="metric">
          <div class="k">Token-tx share (approx)</div>
          <div class="v" id="pctToken">—</div>
          <div class="n" id="pctTokenNote"></div>
        </div>

        <div class="metric">
          <div class="k">Non-token share (approx)</div>
          <div class="v" id="pctNative">—</div>
        </div>

        <div class="metric">
          <div class="k">Contract share</div>
          <div class="v" id="pctContract">—</div>
        </div>

        <div class="metric">
          <div class="k">Other share</div>
          <div class="v" id="pctOther">—</div>
        </div>
      </div>

      <div class="note" id="actNote"></div>
    </section>

    <section class="card">
      <h2>Trends (local observed)</h2>
      <p class="muted">These are local samples stored in your browser (localStorage). Reload multiple times to build a trend.</p>

      <div class="mini">
        <div class="k">Tx 7d (local)</div>
        <div class="v mono" id="chartTx7d">—</div>
        <div class="n" id="chartTxNote"></div>
      </div>
    </section>

    <section class="card">
      <h2>Alerts (local rolling average)</h2>
      <p class="muted">Alerts compare the latest value vs the average of previous samples. Need a few samples first.</p>

      <div class="grid">
        <div class="metric">
          <div class="k">Spike (TPS)</div>
          <div class="v" id="alertSpike">—</div>
        </div>
        <div class="metric">
          <div class="k">Drop (TPS)</div>
          <div class="v" id="alertDrop">—</div>
        </div>
        <div class="metric">
          <div class="k">High Gas</div>
          <div class="v" id="alertHighGas">—</div>
        </div>
      </div>
    </section>

    <section class="card">
      <h2>Debug</h2>

      <details>
        <summary>Show API response</summary>
        <pre id="raw">—</pre>
      </details>

      <details>
        <summary>Errors</summary>
        <pre id="errors">—</pre>
      </details>

      <p class="muted">
        Phase 0 limitations: no indexer, no historical chain-wide breakdown. Token share is “latest-block token-tx share (approx)”.
      </p>
    </section>
  </main>

  <script src="./app.js" defer></script>
</body>
</html>
